# Group #1: Median-House-Value-Prediction
### Group project for UCSD ECE-143.
Analyze the [Zillow Zestimate](https://www.kaggle.com/c/zillow-prize-1/data) dataset for trends and interesting pieces of information. We created a workflow to process and clean the Kaggle dataset, and then created a wrapper around the Folium library to create standardized maps to analyze different ratios or features of the dataset averaged by zipcode. The interesting parts come from finding the right features and ratios to visualize. 

We created a regression model to predict house prices by features supplied in our dataset. We used this model to infer values by holding many of the features constant and only changing the lat/long and zipcode of each inferance. This data can then be visualized by our map tool to see how the data changes with respect to zipcode.

The rest of the README explaisn how to reproduce our results.

## Installation

Some main third part packages used
- pandas
- sklearn
- seaborn
- folium
- geopy

Clone the repository
```
git clone https://github.com/udayvarikuti/Median-House-Value-Prediction.git
```

Setup the environment using the environment.yaml file
```
conda env create -f environment.yaml
```

The data used for building the project is in the link below.
```
https://drive.google.com/drive/folders/1crSYlgPqHwj5ZktkeZzQY9idoIQa1HAY?usp=sharing
```

## Visualization

Visualizations from the EDA can be seen in the [GenerateVisualizations.ipynb](https://github.com/udayvarikuti/Median-House-Value-Prediction/blob/main/GenerateVisualizations.ipynb) notebook. Folium maps can be generated by executing the code in the 'Map Visualization' section.

The Visualization of maps uses the files
<li>exampleMap.py</li>
<li>severityMaps.py</li>
<li>bedroomCountMaps.py</li>
<li>eda.py</li>
<br>
The map_tool.py generates the map. The files exampleMap.py, bedroomCountMaps.py and severityMaps.py call the map_tool.py file internally to generate the folium map.
<br>

Requires outside libraries:
<ul>
    <li>General</li>
    <ul>
        <li>Pandas</li>
        <li>Numpy</li>
    </ul>
    <li>Visualizations</li>
        <ul>
            <li>Folium</li>
            <li>Geopy</li>
            <li>pickle</li>
            <li>Seaborn</li>
            <li>sklearn</li>
        </ul>
    <li>Model</li>
    <ul>
        <li>matplotlib</li>
        <li>scipy</li>
        <li>sklearn</li>
        <li>pickle</li>
        <li>joblib</li>
        <li>sklearn</li>
        <li>statsmodels</li>
    </ul>
    
</ul>

Must have the following data saved in the current directory
<ul>
    <li>"./data/zillowHousing/clean_data_2016.csv"</li>
        <ul>
            <li>Zillow data used for most map visualizations</li>
        </ul>
    <li>"./datastories_table.csv"</li>
        <ul>
            <li>Contains model infered data by zipcode</li>
        </ul>
    <li>"./zipcode_mapping.pickle"</li>
        <ul>
            <li>Used to map zillow internal fake zipcodes to real life zipcodes. Genreated via geopy</li>
        </ul>
</ul>

## Model Training

Model training of this project experimented with two models: multiple linear regressor and random forest regressor. 
During model training, it uses the clean_data_2016.csv and outputs the prediction table datastories_table.csv using random forest regressor because it outperforms multiple linear regressor. Please be cautious that running this py will take a significant time dependent on your processor.

Instructions to run model training: To perform the model training, run the "data_modeling.py" python file with the "clean_data_2016.csv file in the same repository.

Requires outside libraries:
<ul>
    <li>General</li>
    <ul>
        <li>Pandas</li>
        <li>Numpy</li>
        <li>Scipy</li>
        <li>sklearn</li>
        <li>pickle</li>
        <li>joblib</li>
        <li>statsmodels</li>
    </ul>
</ul>    
Must have the following data saved in the current directory where the this py is located.
<ul>
    <li>"./data/zillowHousing/clean_data_2016.csv"</li>
        <ul>
            <li>Zillow data used for model training</li>
        </ul>
</ul>

## References
<ul>
    <li>Zillow Housing data: https://www.kaggle.com/c/zillow-prize-1/data</li>
    <li>GeoJSON data: https://github.com/OpenDataDE/State-zip-code-GeoJSON</li>
    <li>US Census Data, number of houses built: https://www.census.gov/construction/bps/</li>
    <li>CA population data: https://www.dof.ca.gov/Forecasting/Demographics/Estimates/</li>
    <li>California Historical Housing Units: https://cbia.org/housing-statistics/</li>
    <li>Population growth has outpaced home construction for 20 years: https://usafacts.org/articles/population-growth-has-outpaced-home-construction-for-20-years/</li>
</ul>
